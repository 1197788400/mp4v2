<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title>MP4v21.0-r93: MP4v2 File I/O</title>
    <link href="project.css" rel="stylesheet" type="text/css">
</head>
<body>
<div id="sitebanner">
    <span id="slogan">
        C/C++ library and utilities
    </span>
    <span id="title">
        API Documentation
    </span>
</div>
<!-- Generated by Doxygen 1.5.7.1-20081103 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>MP4v2 File I/O</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mp4__fileops.html#g548b75af24607211fc865f13989feb5a">MP4_CREATE_64BIT_DATA</a>&nbsp;&nbsp;&nbsp;0x01</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Bit used with <a class="el" href="group__mp4__fileops.html#g10b62a43147c1892dd9bbe9c16b59af3" title="Create a new mp4 file.">MP4Create()</a> to enable 64-bit data-atoms.  <a href="#g548b75af24607211fc865f13989feb5a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mp4__fileops.html#gc5d3ff6b04ffa9a2f7ffe36196fb96f7">MP4_CREATE_64BIT_TIME</a>&nbsp;&nbsp;&nbsp;0x02</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Bit used with <a class="el" href="group__mp4__fileops.html#g10b62a43147c1892dd9bbe9c16b59af3" title="Create a new mp4 file.">MP4Create()</a> to enable 64-bit time-atoms.  <a href="#gc5d3ff6b04ffa9a2f7ffe36196fb96f7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mp4__fileops.html#g9c22e05d768507a5d6b0499cb948bd63">MP4_CREATE_64BIT</a>&nbsp;&nbsp;&nbsp;(MP4_CREATE_64BIT_DATA | MP4_CREATE_64BIT_TIME)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Convenience bitmask for both data and time atoms.  <a href="#g9c22e05d768507a5d6b0499cb948bd63"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mp4__fileops.html#gdc86739f870c6a66b19498c1f2811f7d">MP4_CREATE_EXTENSIBLE_FORMAT</a>&nbsp;&nbsp;&nbsp;0x04</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Not used.  <a href="#gdc86739f870c6a66b19498c1f2811f7d"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mp4__fileops.html#g5123d9288961860eeb9100ac10927ff2">MP4Close</a> (MP4FileHandle hFile)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Close an mp4 file.  <a href="#g5123d9288961860eeb9100ac10927ff2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">MP4FileHandle&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mp4__fileops.html#g10b62a43147c1892dd9bbe9c16b59af3">MP4Create</a> (const char *fileName, uint32_t verbosity, uint32_t flags)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a new mp4 file.  <a href="#g10b62a43147c1892dd9bbe9c16b59af3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">MP4FileHandle&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mp4__fileops.html#gdf675c0def137a903559c0c9efa21260">MP4CreateEx</a> (const char *fileName, uint32_t verbosity, uint32_t flags, int add_ftyp, int add_iods, char *majorBrand, uint32_t minorVersion, char **compatibleBrands, uint32_t compatibleBrandsCount)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a new mp4 file with extended options.  <a href="#gdf675c0def137a903559c0c9efa21260"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mp4__fileops.html#g1ba6729bc9a427fff9ff49b91ca16157">MP4Dump</a> (MP4FileHandle hFile, FILE *pDumpFile, bool dumpImplicits)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Dump mp4 file contents as ASCII.  <a href="#g1ba6729bc9a427fff9ff49b91ca16157"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mp4__fileops.html#gd5fe3bc7ba0aa76a1e2c4a222cfe815e">MP4FileInfo</a> (const char *fileName, MP4TrackId trackId)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return a textual summary of an mp4 file.  <a href="#gd5fe3bc7ba0aa76a1e2c4a222cfe815e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mp4__fileops.html#g94ce0bd012c33b6d8511510859eb6ce3">MP4Info</a> (MP4FileHandle hFile, MP4TrackId trackId)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return a textual summary of an mp4 file.  <a href="#g94ce0bd012c33b6d8511510859eb6ce3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">MP4FileHandle&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mp4__fileops.html#g34269f0f2eb19da1b2b270ad278dfe3c">MP4Modify</a> (const char *fileName, uint32_t verbosity, uint32_t flags)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Modify an existing mp4 file.  <a href="#g34269f0f2eb19da1b2b270ad278dfe3c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mp4__fileops.html#gb8610c0dfeb430fe527ce344241027a2">MP4Optimize</a> (const char *fileName, const char *newFileName, uint32_t verbosity)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Optimize the layour of an mp4 file.  <a href="#gb8610c0dfeb430fe527ce344241027a2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">MP4FileHandle&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mp4__fileops.html#g5fe3bd46adb37d46a59ecf3cd90f2d6b">MP4Read</a> (const char *fileName, uint32_t verbosity)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read an existing mp4 file.  <a href="#g5fe3bd46adb37d46a59ecf3cd90f2d6b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">MP4FileHandle&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mp4__fileops.html#gae1ca7d1843552a09974069e3a6a265c">MP4ReadEx</a> (const char *fileName, void *user, Virtual_IO_t *virtual_IO, uint32_t verbosity)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read an existing mp4 file with extended options.  <a href="#gae1ca7d1843552a09974069e3a6a265c"></a><br></td></tr>
</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="g9c22e05d768507a5d6b0499cb948bd63"></a><!-- doxytag: member="mp4v2.h::MP4_CREATE_64BIT" ref="g9c22e05d768507a5d6b0499cb948bd63" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MP4_CREATE_64BIT&nbsp;&nbsp;&nbsp;(MP4_CREATE_64BIT_DATA | MP4_CREATE_64BIT_TIME)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Convenience bitmask for both data and time atoms. 
<p>
<dl compact><dt><b><a class="el" href="deprecated.html#_deprecated000001">Deprecated:</a></b></dt><dd>scheduled for removal </dd></dl>

</div>
</div><p>
<a class="anchor" name="g548b75af24607211fc865f13989feb5a"></a><!-- doxytag: member="mp4v2.h::MP4_CREATE_64BIT_DATA" ref="g548b75af24607211fc865f13989feb5a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MP4_CREATE_64BIT_DATA&nbsp;&nbsp;&nbsp;0x01          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Bit used with <a class="el" href="group__mp4__fileops.html#g10b62a43147c1892dd9bbe9c16b59af3" title="Create a new mp4 file.">MP4Create()</a> to enable 64-bit data-atoms. 
<p>

</div>
</div><p>
<a class="anchor" name="gc5d3ff6b04ffa9a2f7ffe36196fb96f7"></a><!-- doxytag: member="mp4v2.h::MP4_CREATE_64BIT_TIME" ref="gc5d3ff6b04ffa9a2f7ffe36196fb96f7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MP4_CREATE_64BIT_TIME&nbsp;&nbsp;&nbsp;0x02          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Bit used with <a class="el" href="group__mp4__fileops.html#g10b62a43147c1892dd9bbe9c16b59af3" title="Create a new mp4 file.">MP4Create()</a> to enable 64-bit time-atoms. 
<p>
<dl class="note" compact><dt><b>Note:</b></dt><dd>QuickTime versions <b>prior</b> to 7.2.1 are incompatible with this extension. </dd></dl>

</div>
</div><p>
<a class="anchor" name="gdc86739f870c6a66b19498c1f2811f7d"></a><!-- doxytag: member="mp4v2.h::MP4_CREATE_EXTENSIBLE_FORMAT" ref="gdc86739f870c6a66b19498c1f2811f7d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MP4_CREATE_EXTENSIBLE_FORMAT&nbsp;&nbsp;&nbsp;0x04          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Not used. 
<p>
<dl compact><dt><b><a class="el" href="deprecated.html#_deprecated000002">Deprecated:</a></b></dt><dd>scheduled for removal </dd></dl>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="g5123d9288961860eeb9100ac10927ff2"></a><!-- doxytag: member="mp4v2.h::MP4Close" ref="g5123d9288961860eeb9100ac10927ff2" args="(MP4FileHandle hFile)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MP4Close           </td>
          <td>(</td>
          <td class="paramtype">MP4FileHandle&nbsp;</td>
          <td class="paramname"> <em>hFile</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Close an mp4 file. 
<p>
MP4Close closes a previously opened mp4 file. If the file was opened writable with <a class="el" href="group__mp4__fileops.html#g10b62a43147c1892dd9bbe9c16b59af3" title="Create a new mp4 file.">MP4Create()</a> or <a class="el" href="group__mp4__fileops.html#g34269f0f2eb19da1b2b270ad278dfe3c" title="Modify an existing mp4 file.">MP4Modify()</a>, then <a class="el" href="group__mp4__fileops.html#g5123d9288961860eeb9100ac10927ff2" title="Close an mp4 file.">MP4Close()</a> will write out all pending information to disk.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hFile</em>&nbsp;</td><td>handle of file to close. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="g10b62a43147c1892dd9bbe9c16b59af3"></a><!-- doxytag: member="mp4v2.h::MP4Create" ref="g10b62a43147c1892dd9bbe9c16b59af3" args="(const char *fileName, uint32_t verbosity, uint32_t flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MP4FileHandle MP4Create           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>fileName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>verbosity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a new mp4 file. 
<p>
MP4Create is the first call that should be used when you want to create a new, empty mp4 file. It is equivalent to opening a file for writing, but also involved with creation of necessary mp4 framework structures. ie. invoking <a class="el" href="group__mp4__fileops.html#g10b62a43147c1892dd9bbe9c16b59af3" title="Create a new mp4 file.">MP4Create()</a> followed by <a class="el" href="group__mp4__fileops.html#g5123d9288961860eeb9100ac10927ff2" title="Close an mp4 file.">MP4Close()</a> will result in a file with a non-zero size.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fileName</em>&nbsp;</td><td>pathname of the file to be created. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>verbosity</em>&nbsp;</td><td>bitmask of diagnostic details the library should print to stdout during its functioning. See MP4SetVerbosity() for values. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>flags</em>&nbsp;</td><td>bitmask that allows the user to set 64-bit values for data or time atoms. Valid bits may be any combination of: <ul>
<li><a class="el" href="group__mp4__fileops.html#g548b75af24607211fc865f13989feb5a" title="Bit used with MP4Create() to enable 64-bit data-atoms.">MP4_CREATE_64BIT_DATA</a> </li>
<li><a class="el" href="group__mp4__fileops.html#gc5d3ff6b04ffa9a2f7ffe36196fb96f7" title="Bit used with MP4Create() to enable 64-bit time-atoms.">MP4_CREATE_64BIT_TIME</a></li>
</ul>
</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>On success a handle of the newly created file for use in subsequent calls to the library. On error, <a class="el" href="group__mp4__general.html#gfa387d447016a2c4fb1bb7e70b6e3b32" title="Invalid MP4FileHandle constant.">MP4_INVALID_FILE_HANDLE</a> is returned. </dd></dl>

</div>
</div><p>
<a class="anchor" name="gdf675c0def137a903559c0c9efa21260"></a><!-- doxytag: member="mp4v2.h::MP4CreateEx" ref="gdf675c0def137a903559c0c9efa21260" args="(const char *fileName, uint32_t verbosity, uint32_t flags, int add_ftyp, int add_iods, char *majorBrand, uint32_t minorVersion, char **compatibleBrands, uint32_t compatibleBrandsCount)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MP4FileHandle MP4CreateEx           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>fileName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>verbosity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>add_ftyp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>add_iods</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>majorBrand</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>minorVersion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&nbsp;</td>
          <td class="paramname"> <em>compatibleBrands</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>compatibleBrandsCount</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a new mp4 file with extended options. 
<p>
MP4CreateEx is an extended version of <a class="el" href="group__mp4__fileops.html#g10b62a43147c1892dd9bbe9c16b59af3" title="Create a new mp4 file.">MP4Create()</a>.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fileName</em>&nbsp;</td><td>pathname of the file to be created. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>verbosity</em>&nbsp;</td><td>bitmask of diagnostic details the library should print to stdout during its functioning. See MP4SetVerbosity() for values. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>flags</em>&nbsp;</td><td>bitmask that allows the user to set 64-bit values for data or time atoms. Valid bits may be any combination of: <ul>
<li><a class="el" href="group__mp4__fileops.html#g548b75af24607211fc865f13989feb5a" title="Bit used with MP4Create() to enable 64-bit data-atoms.">MP4_CREATE_64BIT_DATA</a> </li>
<li><a class="el" href="group__mp4__fileops.html#gc5d3ff6b04ffa9a2f7ffe36196fb96f7" title="Bit used with MP4Create() to enable 64-bit time-atoms.">MP4_CREATE_64BIT_TIME</a> </li>
</ul>
</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>add_ftyp</em>&nbsp;</td><td>if true an <b>ftyp</b> atom is automatically created. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>add_iods</em>&nbsp;</td><td>if true an <b>iods</b> atom is automatically created. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>majorBrand</em>&nbsp;</td><td><b>ftyp</b> brand identifier. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>minorVersion</em>&nbsp;</td><td><b>ftyp</b> informative integer for the minor version of the major brand. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>compatibleBrands</em>&nbsp;</td><td><b>ftyp</b> list of compatible brands. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>compatibleBrandsCount</em>&nbsp;</td><td>is the count of items specified in compatibleBrands.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>On success a handle of the newly created file for use in subsequent calls to the library. On error, <a class="el" href="group__mp4__general.html#gfa387d447016a2c4fb1bb7e70b6e3b32" title="Invalid MP4FileHandle constant.">MP4_INVALID_FILE_HANDLE</a> is returned. </dd></dl>

</div>
</div><p>
<a class="anchor" name="g1ba6729bc9a427fff9ff49b91ca16157"></a><!-- doxytag: member="mp4v2.h::MP4Dump" ref="g1ba6729bc9a427fff9ff49b91ca16157" args="(MP4FileHandle hFile, FILE *pDumpFile, bool dumpImplicits)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool MP4Dump           </td>
          <td>(</td>
          <td class="paramtype">MP4FileHandle&nbsp;</td>
          <td class="paramname"> <em>hFile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&nbsp;</td>
          <td class="paramname"> <em>pDumpFile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>dumpImplicits</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Dump mp4 file contents as ASCII. 
<p>
Dump is an invaluable debugging tool in that in can reveal all the details of the mp4 control structures. However, the output will not make much sense until you familiarize yourself with the mp4 specification (or the Quicktime File Format specification).<p>
Note that <a class="el" href="group__mp4__fileops.html#g1ba6729bc9a427fff9ff49b91ca16157" title="Dump mp4 file contents as ASCII.">MP4Dump()</a> will not print the individual values of control tables, such as the size of each sample, unless the current verbosity value includes the flag <a class="el" href="group__mp4__general.html#g54e6662d9e71942d9e024d2f500f3f6c" title="Verbosity level table.">MP4_DETAILS_TABLE</a>. See MP4SetVerbosity() for how to set this flag.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hFile</em>&nbsp;</td><td>handle of file to dump. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pDumpFile</em>&nbsp;</td><td>dump destination. If NULL stdout will be used. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dumpImplicits</em>&nbsp;</td><td>prints properties which would not actually be written to the mp4 file, but still exist in mp4 control structures. ie. they are implicit given the current values of other controlling properties.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd><b>true</b> on success, <b>false</b> on failure. </dd></dl>

</div>
</div><p>
<a class="anchor" name="gd5fe3bc7ba0aa76a1e2c4a222cfe815e"></a><!-- doxytag: member="mp4v2.h::MP4FileInfo" ref="gd5fe3bc7ba0aa76a1e2c4a222cfe815e" args="(const char *fileName, MP4TrackId trackId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* MP4FileInfo           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>fileName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MP4TrackId&nbsp;</td>
          <td class="paramname"> <em>trackId</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return a textual summary of an mp4 file. 
<p>
MP4FileInfo provides a string that contains a textual summary of the contents of an mp4 file. This includes the track id's, the track type, and track specific information. For example, for a video track, media encoding, image size, frame rate, and bitrate are summarized.<p>
Note that the returned string is malloc'ed, so it is the caller's responsibility to free() the string. Also note that the returned string contains newlines and tabs which may or may not be desirable.<p>
The following is an example of the output of <a class="el" href="group__mp4__fileops.html#g94ce0bd012c33b6d8511510859eb6ce3" title="Return a textual summary of an mp4 file.">MP4Info()</a>: <div class="fragment"><pre class="fragment">
Track  Type   Info
1      video  MPEG−4 Simple @ L3, 119.625 secs, 1008 kbps, 352x288 @ 24.00 fps
2      audio  MPEG−4, 119.327 secs, 128 kbps, 44100 Hz
3      hint   Payload MP4V−ES for track 1
4      hint   Payload mpeg4−generic for track 2
5      od     Object Descriptors
6      scene  BIFS
</pre></div><p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fileName</em>&nbsp;</td><td>pathname to mp4 file to summarize. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>trackId</em>&nbsp;</td><td>specifies track to summarize. If the value is <a class="el" href="group__mp4__general.html#g20022a4a97dd9c2031ae2a1ef6db7241" title="Invalid MP4TrackId constant.">MP4_INVALID_TRACK_ID</a>, the summary info is created for all tracks in the file.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>On success a malloc'd string containing summary information. On failre, NULL. </dd></dl>

</div>
</div><p>
<a class="anchor" name="g94ce0bd012c33b6d8511510859eb6ce3"></a><!-- doxytag: member="mp4v2.h::MP4Info" ref="g94ce0bd012c33b6d8511510859eb6ce3" args="(MP4FileHandle hFile, MP4TrackId trackId)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* MP4Info           </td>
          <td>(</td>
          <td class="paramtype">MP4FileHandle&nbsp;</td>
          <td class="paramname"> <em>hFile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MP4TrackId&nbsp;</td>
          <td class="paramname"> <em>trackId</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return a textual summary of an mp4 file. 
<p>
MP4FileInfo provides a string that contains a textual summary of the contents of an mp4 file. This includes the track id's, the track type, and track specific information. For example, for a video track, media encoding, image size, frame rate, and bitrate are summarized.<p>
Note that the returned string is malloc'ed, so it is the caller's responsibility to free() the string. Also note that the returned string contains newlines and tabs which may or may not be desirable.<p>
The following is an example of the output of <a class="el" href="group__mp4__fileops.html#g94ce0bd012c33b6d8511510859eb6ce3" title="Return a textual summary of an mp4 file.">MP4Info()</a>: <div class="fragment"><pre class="fragment">
Track  Type   Info
1      video  MPEG−4 Simple @ L3, 119.625 secs, 1008 kbps, 352x288 @ 24.00 fps
2      audio  MPEG−4, 119.327 secs, 128 kbps, 44100 Hz
3      hint   Payload MP4V−ES for track 1
4      hint   Payload mpeg4−generic for track 2
5      od     Object Descriptors
6      scene  BIFS
</pre></div><p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>hFile</em>&nbsp;</td><td>handle of file to summarize. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>trackId</em>&nbsp;</td><td>specifies track to summarize. If the value is <a class="el" href="group__mp4__general.html#g20022a4a97dd9c2031ae2a1ef6db7241" title="Invalid MP4TrackId constant.">MP4_INVALID_TRACK_ID</a>, the summary info is created for all tracks in the file.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>On success a malloc'd string containing summary information. On failre, NULL. </dd></dl>

</div>
</div><p>
<a class="anchor" name="g34269f0f2eb19da1b2b270ad278dfe3c"></a><!-- doxytag: member="mp4v2.h::MP4Modify" ref="g34269f0f2eb19da1b2b270ad278dfe3c" args="(const char *fileName, uint32_t verbosity, uint32_t flags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MP4FileHandle MP4Modify           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>fileName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>verbosity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>flags</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Modify an existing mp4 file. 
<p>
MP4Modify is the first call that should be used when you want to modify an existing mp4 file. It is roughly equivalent to opening a file in read/write mode.<p>
Since modifications to an existing mp4 file can result in a sub−optimal file layout, you may want to use <a class="el" href="group__mp4__fileops.html#gb8610c0dfeb430fe527ce344241027a2" title="Optimize the layour of an mp4 file.">MP4Optimize()</a> after you have modified and closed the mp4 file.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fileName</em>&nbsp;</td><td>pathname of the file to be modified. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>verbosity</em>&nbsp;</td><td>bitmask of diagnostic details the library should print to stdout during its functioning. See MP4SetVerbosity() for values. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>flags</em>&nbsp;</td><td>currently ignored.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>On success a handle of the target file for use in subsequent calls to the library. On error, <a class="el" href="group__mp4__general.html#gfa387d447016a2c4fb1bb7e70b6e3b32" title="Invalid MP4FileHandle constant.">MP4_INVALID_FILE_HANDLE</a> is returned. </dd></dl>

</div>
</div><p>
<a class="anchor" name="gb8610c0dfeb430fe527ce344241027a2"></a><!-- doxytag: member="mp4v2.h::MP4Optimize" ref="gb8610c0dfeb430fe527ce344241027a2" args="(const char *fileName, const char *newFileName, uint32_t verbosity)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool MP4Optimize           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>fileName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>newFileName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>verbosity</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Optimize the layour of an mp4 file. 
<p>
MP4Optimize reads an existing mp4 file and writes a new version of the file with the two important changes:<p>
First, the mp4 control information is moved to the beginning of the file. (Frequenty it is at the end of the file due to it being constantly modified as track samples are added to an mp4 file). This optimization is useful in that in allows the mp4 file to be HTTP streamed.<p>
Second, the track samples are interleaved so that the samples for a particular instant in time are colocated within the file. This eliminates disk seeks during playback of the file which results in better performance.<p>
There are also two important side effects of <a class="el" href="group__mp4__fileops.html#gb8610c0dfeb430fe527ce344241027a2" title="Optimize the layour of an mp4 file.">MP4Optimize()</a>:<p>
First, any free blocks within the mp4 file are eliminated.<p>
Second, as a side effect of the sample interleaving process any media data chunks that are not actually referenced by the mp4 control structures are deleted. This is useful if you have called MP4DeleteTrack() which only deletes the control information for a track, and not the actual media data.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fileName</em>&nbsp;</td><td>pathname of (existing) file to be optimized. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>newFileName</em>&nbsp;</td><td>pathname of the new optimized file. If NULL a temporary file will be used and <b>fileName</b> will be over-written upon successful completion. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>verbosity</em>&nbsp;</td><td>bitmask of diagnostic details the library should print to stdout during its functioning. See MP4SetVerbosity() for values.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd><b>true</b> on success, <b>false</b> on failure. </dd></dl>

</div>
</div><p>
<a class="anchor" name="g5fe3bd46adb37d46a59ecf3cd90f2d6b"></a><!-- doxytag: member="mp4v2.h::MP4Read" ref="g5fe3bd46adb37d46a59ecf3cd90f2d6b" args="(const char *fileName, uint32_t verbosity)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MP4FileHandle MP4Read           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>fileName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>verbosity</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read an existing mp4 file. 
<p>
MP4Read is the first call that should be used when you want to just read an existing mp4 file. It is equivalent to opening a file for reading, but in addition the mp4 file is parsed and the control information is loaded into memory. Note that actual track samples are not read into memory until MP4ReadSample() is called.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fileName</em>&nbsp;</td><td>pathname of the file to be read. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>verbosity</em>&nbsp;</td><td>bitmask of diagnostic details the library should print to stdout during its functioning. See MP4SetVerbosity() for values.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>On success a handle of the file for use in subsequent calls to the library. On error, <a class="el" href="group__mp4__general.html#gfa387d447016a2c4fb1bb7e70b6e3b32" title="Invalid MP4FileHandle constant.">MP4_INVALID_FILE_HANDLE</a> is returned. </dd></dl>

</div>
</div><p>
<a class="anchor" name="gae1ca7d1843552a09974069e3a6a265c"></a><!-- doxytag: member="mp4v2.h::MP4ReadEx" ref="gae1ca7d1843552a09974069e3a6a265c" args="(const char *fileName, void *user, Virtual_IO_t *virtual_IO, uint32_t verbosity)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MP4FileHandle MP4ReadEx           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>fileName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Virtual_IO_t *&nbsp;</td>
          <td class="paramname"> <em>virtual_IO</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>verbosity</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read an existing mp4 file with extended options. 
<p>
MP4ReadEx is an extended version of <a class="el" href="group__mp4__fileops.html#g5fe3bd46adb37d46a59ecf3cd90f2d6b" title="Read an existing mp4 file.">MP4Read()</a> which is used when custom I/O routines are to be used with an open file.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fileName</em>&nbsp;</td><td>pathname of the file to be read. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>user</em>&nbsp;</td><td>undocumented. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>virtual_IO</em>&nbsp;</td><td>undocumented. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>verbosity</em>&nbsp;</td><td>bitmask of diagnostic details the library should print to stdout during its functioning. See MP4SetVerbosity() for values.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>On success a handle of the file for use in subsequent calls to the library. On error, <a class="el" href="group__mp4__general.html#gfa387d447016a2c4fb1bb7e70b6e3b32" title="Invalid MP4FileHandle constant.">MP4_INVALID_FILE_HANDLE</a> is returned. </dd></dl>

</div>
</div><p>
</div>
<div class="footer">
    <div>
        generated on Wed Nov 26 03:31:42 2008 for MP4v21.0-r93 by&nbsp;<a href="http://www.doxygen.org">Doxygen</a>
        1.5.7.1-20081103
    </div>
</div>
</body>
</html>
